<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="author" content="Bernie Perez">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenCollab - Collaborative Code Editor</title>
    <link rel="apple-touch-icon" sizes="57x57" href="images/favicon/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="images/favicon/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/favicon/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="images/favicon/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/favicon/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="images/favicon/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="images/favicon/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="images/favicon/apple-touch-icon-152x152.png">
    <link rel="icon" type="image/png" sizes="196x196" href="images/favicon/favicon-196x196.png">
    <link rel="icon" type="image/png" sizes="128x128" href="images/favicon/favicon-128x128.png">
    <link rel="icon" type="image/png" sizes="96x96" href="images/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="32x32" href="images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="images/favicon/favicon-16x16.png">

    <!-- styling -->
    <!-- Custom style -->
    <link rel="stylesheet" href="styles/main.css?v=5">
    <!-- Firepad -->
    <link rel="stylesheet" href="https://cdn.firebase.com/libs/firepad/1.4.0/firepad.css" />

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- scripts -->
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/3.5.2/firebase.js"></script>
    <script src="lib/firebase-sdk.js"></script>
    <!-- ACE and its JavaScript mode and theme files - Updated to latest -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.33.2/ace.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.33.2/ext-language_tools.js"></script>
    <!-- Firepad -->
    <script src="https://cdn.firebase.com/libs/firepad/1.4.0/firepad.min.js"></script>
    <!-- Code Executor -->
    <script src="scripts/code-executor.js?v=2"></script>
    <!-- Authentication -->
    <script src="scripts/auth-api.js"></script>
    
    <!-- Analytics (Optional - Replace with your analytics service) -->
    <!-- 
    <script>
      // Add your analytics code here if needed
      // Example: Google Analytics, PostHog, Plausible, etc.
    </script>
    -->
  </head>
  <body>
    <!-- Landing Modal -->
    <div id="landingModal" class="modal atom-landing">
      <div class="atom-background">
        <div class="atom-gradient"></div>
        <!-- Animated floating code particles -->
        <div class="code-particles" id="codeParticles"></div>
      </div>
      
      <div class="modal-content landing-content atom-card">
        <div class="atom-logo-section">
          <div class="atom-logo">
            <img src="images/favicon/apple-touch-icon-120x120.png" alt="Atom Tickets" width="80" height="80" style="display: block; margin: 0 auto;">
          </div>
          <h1 class="atom-title">OpenCollab Platform</h1>
          <p class="atom-subtitle">Real-time Collaborative Coding</p>
        </div>
        
        <div class="role-selection atom-roles">
          <div class="role-card atom-role-card" id="candidateCard">
            <div class="role-icon atom-icon">
              <svg width="60" height="60" viewBox="0 0 24 24" fill="none">
                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" fill="#018ef5"/>
                <path d="M8.5 12.5L7 14l3 3 5-5-1.5-1.5L10.5 13.5z" fill="#4CAF50"/>
              </svg>
            </div>
            <h3>Join as Candidate</h3>
            <p>Enter your interview session</p>
            <button class="role-btn atom-btn atom-btn-secondary" onclick="document.getElementById('landingModal').style.display='none'; document.getElementById('candidateModal').style.display='flex'; return false;">
              <span>I'm a Candidate</span>
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z" fill="currentColor"/>
              </svg>
            </button>
          </div>
          
          <div class="role-divider atom-divider">
            <span>OR</span>
          </div>
          
          <div class="role-card atom-role-card" id="adminCard">
            <div class="role-icon atom-icon">
              <svg width="60" height="60" viewBox="0 0 24 24" fill="none">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" fill="#018ef5"/>
              </svg>
            </div>
            <h3>Login as Interviewer</h3>
            <p>Create & manage sessions</p>
            <button class="role-btn atom-btn atom-btn-primary" onclick="document.getElementById('landingModal').style.display='none'; document.getElementById('adminLoginModal').style.display='flex'; return false;">
              <span>I'm an Interviewer</span>
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z" fill="currentColor"/>
              </svg>
            </button>
          </div>
        </div>
        
        <div class="atom-features">
          <div class="feature-item">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="#018ef5">
              <path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>
            </svg>
            <span>Real-time Collaboration</span>
          </div>
          <div class="feature-item">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="#018ef5">
              <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
            </svg>
            <span>16+ Languages</span>
          </div>
          <div class="feature-item">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="#018ef5">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z"/>
            </svg>
            <span>Live Code Execution</span>
          </div>
        </div>
      </div>
      
      <footer class="atom-footer">
        <div class="footer-content">
          <div style="display: flex; align-items: center; justify-content: center; margin-bottom: 10px;">
            <img src="images/favicon/apple-touch-icon-60x60.png" alt="Atom Tickets" width="30" height="30" style="margin-right: 10px;">
            <p style="margin: 0;">Made with ‚ù§Ô∏è by <a href="https://www.humancto.com" target="_blank" class="atom-link">HumanCTO</a></p>
          </div>
          <div class="footer-links">
            <a href="https://github.com/humancto/CollabCode" target="_blank">GitHub</a>
            <span class="footer-separator">‚Ä¢</span>
            <a href="https://github.com/humancto/CollabCode/issues" target="_blank">Issues</a>
            <span class="footer-separator">‚Ä¢</span>
            <a href="https://github.com/humancto/CollabCode/wiki" target="_blank">Documentation</a>
          </div>
        </div>
      </footer>
    </div>
    
    <!-- Candidate Join Modal -->
    <div id="candidateModal" class="modal" style="display: none;">
      <div class="modal-content">
        <button class="back-btn" id="candidateBack">‚Üê Back</button>
        <h2>Join Interview Session</h2>
        <p class="modal-subtitle">Enter your details to join the session</p>
        
        <div class="form-group">
          <label>Your Name</label>
          <input type="text" id="candidateName" placeholder="Enter your full name" maxlength="50">
        </div>
        
        <div class="form-group">
          <label>Session Code</label>
          <input type="text" id="candidateSessionCode" placeholder="6-digit code (e.g., 123456)" maxlength="6">
          <small>Your interviewer will provide this code</small>
        </div>
        
        <div style="margin: 20px 0; padding: 15px; background: rgba(66, 165, 245, 0.05); border: 1px solid rgba(66, 165, 245, 0.2); border-radius: 8px;">
          <div style="display: flex; align-items: center; margin-bottom: 10px;">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#42a5f5" stroke-width="2" style="margin-right: 8px;">
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
            </svg>
            <strong style="color: #42a5f5; font-size: 14px;">Privacy & Monitoring Notice</strong>
          </div>
          <label style="display: flex; align-items: flex-start; cursor: pointer; font-size: 13px; color: #555;">
            <input type="checkbox" id="candidatePrivacyConsent" style="margin-right: 10px; margin-top: 2px; cursor: pointer;">
            <span>
              I understand that during this interview session, the following may be monitored for evaluation purposes:
              <ul style="margin: 8px 0 8px 20px; padding: 0; font-size: 12px; color: #666; line-height: 1.5;">
                <li>Tab switching and window focus events</li>
                <li>Activity patterns and idle time</li>
                <li>General interaction metrics</li>
              </ul>
              <span style="font-size: 11px; color: #888;">
                This data is used solely for interview assessment and is handled in accordance with our privacy policy.
              </span>
              <br>
              <a href="#" style="color: #42a5f5; text-decoration: none; margin-top: 8px; display: inline-block; font-size: 12px;">
                üìÑ View Privacy Policy ‚Üí
              </a>
            </span>
          </label>
        </div>
        
        <button id="candidateJoinBtn" class="primary-btn" disabled>Join Session</button>
      </div>
    </div>
    
    <!-- Admin Login Modal -->
    <div id="adminLoginModal" class="modal" style="display: none;">
      <div class="modal-content">
        <button class="back-btn" id="adminLoginBack">‚Üê Back</button>
        <h2>Interviewer Login</h2>
        <p class="modal-subtitle">Login to create and manage sessions</p>
        
        <div class="form-group">
          <label>Email</label>
          <input type="email" id="adminEmail" placeholder="Enter your email">
        </div>
        
        <div class="form-group">
          <label>Password</label>
          <input type="password" id="adminPassword" placeholder="Enter your password">
        </div>
        
        <button id="adminLoginBtn" class="primary-btn">Login</button>
        <div id="loginError" class="error-message" style="display: none;"></div>
      </div>
    </div>
    
    <!-- Admin Dashboard Modal - Professional Redesign -->
    <div id="adminDashboardModal" class="modal" style="display: none;">
      <div class="modal-content dashboard-modal-content">
        <!-- Header with gradient background -->
        <div class="dashboard-header-modern">
          <div class="dashboard-header-content">
            <div style="display: flex; align-items: center;">
              <img src="/images/favicon/apple-touch-icon-76x76.png" alt="Atom Tickets" width="48" height="48" style="margin-right: 15px;">
              <div>
                <h2 class="dashboard-title">Interview Control Center</h2>
                <p class="dashboard-subtitle">Manage your technical interview sessions</p>
              </div>
            </div>
            <button id="adminLogoutBtn" class="logout-btn-modern">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
              </svg>
              <span>Logout</span>
            </button>
          </div>
        </div>
        
        <div class="dashboard-body">
          <!-- Interviewer Profile Card -->
          <div class="interviewer-card">
            <div class="card-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
              </svg>
            </div>
            <div class="card-content">
              <label class="field-label">Interviewer Name</label>
              <input type="text" id="interviewerName" class="modern-input" placeholder="Enter your name (e.g., Tom Smith)">
              <span class="field-hint">This helps track who conducted each interview</span>
            </div>
          </div>
          
          <!-- Quick Actions Section -->
          <div class="quick-actions-section">
            <h3 class="section-title">Quick Actions</h3>
            
            <!-- Create New Session Card -->
            <div class="action-card primary-action">
              <div class="action-icon">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                  <line x1="12" y1="8" x2="12" y2="16"></line>
                  <line x1="8" y1="12" x2="16" y2="12"></line>
                </svg>
              </div>
              <div class="action-content">
                <h4>Start New Interview</h4>
                <p>Create a fresh session for your candidate</p>
                <button id="createSessionBtn" class="action-btn-primary">
                  <span>Create Session</span>
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                    <polyline points="12 5 19 12 12 19"></polyline>
                  </svg>
                </button>
              </div>
            </div>
            
            <!-- Join Session Card -->
            <div class="action-card secondary-action">
              <div class="action-icon">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
                  <polyline points="10 17 15 12 10 7"></polyline>
                  <line x1="15" y1="12" x2="3" y2="12"></line>
                </svg>
              </div>
              <div class="action-content">
                <h4>Join Existing Session</h4>
                <p>Enter a session code to join</p>
                <div class="join-session-group">
                  <input type="text" id="adminSessionCode" class="session-code-input" placeholder="000000" maxlength="6">
                  <button id="adminJoinBtn" class="action-btn-secondary">Join</button>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Active Session Display -->
          <div id="activeSession" class="active-session-modern" style="display: none;">
            <div class="session-status-badge">LIVE</div>
            <h4>Active Session</h4>
            <div class="session-code-display">
              <span id="activeSessionCode" class="code-text"></span>
              <button id="copyCodeBtn" class="copy-btn-modern">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                  <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                </svg>
                <span>Copy</span>
              </button>
            </div>
          </div>
          
          <!-- Management Tools -->
          <div class="management-tools">
            <button id="viewAllSessionsBtn" class="tool-btn">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="7" height="7"></rect>
                <rect x="14" y="3" width="7" height="7"></rect>
                <rect x="14" y="14" width="7" height="7"></rect>
                <rect x="3" y="14" width="7" height="7"></rect>
              </svg>
              <span>Session Manager</span>
              <span class="tool-badge">View All</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Slack Configuration Modal -->
    <div id="slackConfigModal" class="modal" style="display: none;">
      <div class="modal-content" style="max-width: 600px;">
        <div class="modal-header">
          <h2>Share to Slack</h2>
          <button id="closeSlackConfigBtn" class="close-modal-btn">√ó</button>
        </div>
        
        <div class="slack-config-content">
          <div class="slack-info-section" style="padding: 10px; background: #2a2a2a; border-radius: 4px; margin-bottom: 20px;">
            <p style="color: #888; margin: 0;">
              <strong>üìå Note:</strong> Slack integration is configured server-side for security.
              Contact your administrator if notifications are not working.
            </p>
          </div>
          
          <div class="slack-preview-section" style="margin-top: 20px;">
            <h3>Preview:</h3>
            <div id="slackMessagePreview" style="background: #1a1a1a; padding: 15px; border-radius: 8px; border-left: 4px solid #4caf50;">
              <div style="font-weight: bold; margin-bottom: 10px;">Interview Feedback</div>
              <div id="slackPreviewContent" style="color: #ccc;">
                <!-- Preview content will be inserted here -->
              </div>
            </div>
          </div>
          
          <div class="slack-actions" style="margin-top: 20px; display: flex; gap: 10px; justify-content: flex-end;">
            <button id="cancelSlackShare" style="padding: 8px 16px; background: #666; color: white; border: none; border-radius: 4px; cursor: pointer;">Cancel</button>
            <button id="sendToSlack" style="padding: 8px 16px; background: #4caf50; color: white; border: none; border-radius: 4px; cursor: pointer;">Send to Slack</button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Session Details Modal -->
    <div id="sessionDetailsModal" class="modal" style="display: none;">
      <div class="modal-content" style="max-width: 800px;">
        <div class="modal-header">
          <h2>Session Details</h2>
          <div style="display: flex; gap: 10px; align-items: center;">
            <button id="shareToSlackBtn" class="slack-share-btn" title="Share to Slack">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M5.042 15.165a2.528 2.528 0 0 1-2.52 2.523A2.528 2.528 0 0 1 0 15.165a2.527 2.527 0 0 1 2.522-2.52h2.52v2.52zM6.313 15.165a2.527 2.527 0 0 1 2.521-2.52 2.527 2.527 0 0 1 2.521 2.52v6.313A2.528 2.528 0 0 1 8.834 24a2.528 2.528 0 0 1-2.521-2.522v-6.313zM8.834 5.042a2.528 2.528 0 0 1-2.521-2.52A2.528 2.528 0 0 1 8.834 0a2.528 2.528 0 0 1 2.521 2.522v2.52H8.834zM8.834 6.313a2.528 2.528 0 0 1 2.521 2.521 2.528 2.528 0 0 1-2.521 2.521H2.522A2.528 2.528 0 0 1 0 8.834a2.528 2.528 0 0 1 2.522-2.521h6.312zM18.956 8.834a2.528 2.528 0 0 1 2.522-2.521A2.528 2.528 0 0 1 24 8.834a2.528 2.528 0 0 1-2.522 2.521h-2.522V8.834zM17.688 8.834a2.528 2.528 0 0 1-2.523 2.521 2.527 2.527 0 0 1-2.52-2.521V2.522A2.527 2.527 0 0 1 15.165 0a2.528 2.528 0 0 1 2.523 2.522v6.312zM15.165 18.956a2.528 2.528 0 0 1 2.523 2.522A2.528 2.528 0 0 1 15.165 24a2.527 2.527 0 0 1-2.52-2.522v-2.522h2.52zM15.165 17.688a2.527 2.527 0 0 1-2.52-2.523 2.526 2.526 0 0 1 2.52-2.52h6.313A2.527 2.527 0 0 1 24 15.165a2.528 2.528 0 0 1-2.522 2.523h-6.313z"/>
              </svg>
            </button>
            <button id="closeSessionDetailsBtn" class="close-modal-btn">√ó</button>
          </div>
        </div>
        
        <div id="sessionDetailsContent">
          <div class="session-detail-header">
            <h3>Session: <span id="detail-session-code"></span></h3>
            <div class="detail-recommendation" id="detail-recommendation"></div>
          </div>
          
          <div class="session-detail-tabs">
            <button class="detail-tab active" data-tab="notes">üìù Notes</button>
            <button class="detail-tab" data-tab="info">‚ÑπÔ∏è Session Info</button>
            <button class="detail-tab" data-tab="activity">üìä Candidate Behavior</button>
          </div>
          
          <div class="tab-content" id="notes-tab" style="display: block;">
            <div class="notes-display">
              <div class="notes-display-rating">
                <strong>Rating:</strong> <span id="display-rating"></span>
              </div>
              <div class="notes-display-tags">
                <strong>Tags:</strong> <span id="display-tags"></span>
              </div>
              <div class="notes-display-content">
                <strong>Notes:</strong>
                <div id="display-notes-content"></div>
              </div>
              <div class="notes-display-meta">
                <small>Last updated: <span id="display-updated"></span> by <span id="display-author"></span></small>
              </div>
            </div>
          </div>
          
          
          <div class="tab-content" id="info-tab" style="display: none;">
            <div class="session-info-display" style="padding: 20px;">
              <h4>üìÖ Session Details</h4>
              <div style="display: grid; grid-template-columns: 150px 1fr; gap: 15px; margin-top: 15px;">
                <strong>Session Code:</strong> <span id="detail-session-code" style="font-family: monospace; color: #42a5f5;"></span>
                <strong>Status:</strong> <span id="display-status"></span>
                <strong>Started:</strong> <span id="display-created"></span>
                <strong>Duration:</strong> <span id="display-duration"></span>
                <strong>Participants:</strong> <span id="display-participants"></span>
              </div>
            </div>
          </div>
          
          
          <div class="tab-content" id="activity-tab" style="display: none;">
            <div class="activity-info-display" style="padding: 20px;">
              <h4>üìä Candidate Behavior Monitoring</h4>
              <div style="background: rgba(255, 193, 7, 0.1); padding: 10px; border-radius: 5px; margin-bottom: 15px;">
                <small style="color: #ffc107;">‚ö†Ô∏è This data is collected only when candidates consent to activity monitoring</small>
              </div>
              <div id="activity-tracking-data">
                <p class="loading-message">Loading activity data...</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Sessions Management Modal -->
    <div id="sessionsModal" class="modal" style="display: none;">
      <div class="modal-content sessions-modal-content">
        <div class="modal-header">
          <h2>Sessions Management</h2>
          <button id="closeSessionsModalBtn" class="close-modal-btn">√ó</button>
        </div>
        
        <div class="sessions-stats">
          <div class="stat-item">
            <span class="stat-label">Active Sessions:</span>
            <span id="activeSessionsCount" class="stat-value">0</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Total Users:</span>
            <span id="totalUsersCount" class="stat-value">0</span>
          </div>
        </div>
        
        <div class="session-tabs">
          <button id="activeTabBtn" class="tab-btn active">Active/In Progress</button>
          <button id="archivedTabBtn" class="tab-btn">Ended Sessions</button>
        </div>
        
        <div class="bulk-actions" id="bulkActionsBar">
          <button id="selectAllBtn" class="select-all-btn">Select All</button>
          <button id="endSelectedBtn" class="end-selected-btn" disabled>End Selected</button>
          <button id="endAllSessionsBtn" class="end-all-btn">End All Sessions</button>
        </div>
        
        <div id="sessionsTableContainer">
          <table id="sessionsTable" class="sessions-table">
            <thead>
              <tr>
                <th style="width: 40px;">
                  <input type="checkbox" id="selectAllCheckbox" title="Select All">
                </th>
                <th>Session Code</th>
                <th>Status</th>
                <th>Candidate</th>
                <th>All Participants</th>
                <th>Created</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="sessionsTableBody">
              <!-- Sessions will be populated here -->
            </tbody>
          </table>
          <div id="noSessionsMessage" class="no-sessions-message" style="display: none;">
            <p>No active sessions at the moment</p>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Main Editor Interface -->
    <div id="main-container" style="display: none;">
      <!-- Top Bar -->
      <div id="top-bar">
        <div class="left-controls">
          <select id="language-selector" title="Select Language">
            <optgroup label="Popular">
              <option value="javascript">üü® JavaScript</option>
              <option value="python">üêç Python</option>
              <option value="java">‚òï Java</option>
              <option value="typescript">üîµ TypeScript</option>
              <option value="c_cpp">üî∑ C/C++</option>
            </optgroup>
            <optgroup label="Systems">
              <option value="go">üêπ Go</option>
              <option value="rust">ü¶Ä Rust</option>
              <option value="csharp">üü¶ C#</option>
              <option value="swift">üçé Swift</option>
              <option value="kotlin">üü™ Kotlin</option>
            </optgroup>
            <optgroup label="Scripting">
              <option value="ruby">üíé Ruby</option>
              <option value="php">üêò PHP</option>
              <option value="perl">üê™ Perl</option>
              <option value="lua">üåô Lua</option>
            </optgroup>
            <optgroup label="Functional">
              <option value="scala">üî¥ Scala</option>
              <option value="haskell">üéì Haskell</option>
              <option value="elixir">üíß Elixir</option>
            </optgroup>
            <optgroup label="Data & Stats">
              <option value="r">üìä R</option>
              <option value="sql">üóÑÔ∏è SQL</option>
            </optgroup>
            <optgroup label="Mobile">
              <option value="dart">üéØ Dart</option>
              <option value="swift">üçé Swift</option>
              <option value="kotlin">üü™ Kotlin</option>
            </optgroup>
            <optgroup label="Web">
              <option value="html">üåê HTML</option>
              <option value="css">üé® CSS</option>
              <option value="javascript">üü® JavaScript</option>
              <option value="typescript">üîµ TypeScript</option>
            </optgroup>
            <optgroup label="Config">
              <option value="json">üìã JSON</option>
              <option value="yaml">üìÑ YAML</option>
              <option value="xml">üì∞ XML</option>
              <option value="markdown">üìù Markdown</option>
            </optgroup>
          </select>
          
          <select id="theme-selector">
            <option value="monokai">Monokai</option>
            <option value="github">GitHub</option>
            <option value="tomorrow">Tomorrow</option>
            <option value="twilight">Twilight</option>
            <option value="solarized_dark">Solarized Dark</option>
            <option value="solarized_light">Solarized Light</option>
            <option value="textmate">TextMate</option>
            <option value="terminal">Terminal</option>
          </select>

          <select id="fontSize-selector">
            <option value="12">12px</option>
            <option value="14" selected>14px</option>
            <option value="16">16px</option>
            <option value="18">18px</option>
            <option value="20">20px</option>
          </select>
        </div>

        <div class="center-info">
          <img src="/images/favicon/apple-touch-icon-57x57.png" alt="Atom Tickets" width="24" height="24" style="margin-right: 8px; vertical-align: middle;">
          <span id="session-info"></span>
          <button id="end-session-btn" class="end-session-button" style="margin-left: 15px;">End Interview</button>
          <span id="user-count" class="user-count"></span>
        </div>

        <div class="right-controls">
          <div id="users-list"></div>
          <button id="notes-toggle-btn" class="notes-button" style="display: none;">üìù Notes</button>
          <button id="run-btn" class="run-button">‚ñ∂ Run</button>
          <button id="share-btn">Share</button>
        </div>
      </div>

      <!-- Editor Container with Split View -->
      <div id="editor-wrapper">
        <div id="split-container">
          <div id="firepad-container"></div>
          
          <!-- Interviewer Notes Panel -->
          <div id="notes-panel" style="display: none;">
            <div id="notes-header">
              <span>üìù Interview Notes</span>
              <span id="notes-save-status" style="font-size: 12px; color: #888; margin-left: 10px;"></span>
              <span id="behavior-alert-badge" class="alert-badge" style="display: none;">0</span>
              <button id="close-notes">√ó</button>
            </div>
            <!-- Activity Monitoring Dashboard -->
            <div id="activity-dashboard" style="display: none; background: rgba(66,165,245,0.05); border: 1px solid rgba(66,165,245,0.2); border-radius: 4px; padding: 12px; margin: 10px;">
              <!-- Activity metrics will be inserted here -->
            </div>
            <div id="notes-content">
              <div class="notes-rating-section">
                <label>Quick Rating:</label>
                <div class="rating-stars" id="rating-stars">
                  <span data-rating="1">‚òÜ</span>
                  <span data-rating="2">‚òÜ</span>
                  <span data-rating="3">‚òÜ</span>
                  <span data-rating="4">‚òÜ</span>
                  <span data-rating="5">‚òÜ</span>
                </div>
              </div>
              
              <div class="notes-tags-section">
                <label>Quick Tags:</label>
                <div class="quick-tags">
                  <button class="tag-btn" data-tag="strong-fundamentals">Strong Fundamentals</button>
                  <button class="tag-btn" data-tag="good-communication">Good Communication</button>
                  <button class="tag-btn" data-tag="needs-practice">Needs Practice</button>
                  <button class="tag-btn" data-tag="problem-solver">Problem Solver</button>
                  <button class="tag-btn" data-tag="asks-good-questions">Asks Good Questions</button>
                </div>
              </div>
              
              <div class="notes-text-section">
                <label>Notes:</label>
                <textarea id="interview-notes-text" placeholder="Add your observations about the candidate..."></textarea>
              </div>
              
              <div class="notes-recommendation-section">
                <label>Recommendation:</label>
                <select id="notes-recommendation">
                  <option value="">Select...</option>
                  <option value="STRONG_HIRE">Strong Hire</option>
                  <option value="HIRE">Hire</option>
                  <option value="PROCEED_TO_NEXT_ROUND">Proceed to Next Round</option>
                  <option value="MAYBE">Maybe</option>
                  <option value="NO_HIRE">No Hire</option>
                </select>
              </div>
              
              <div class="notes-actions">
                <button id="save-notes-btn" class="save-notes-btn">Save Notes</button>
              </div>
            </div>
          </div>
          
          <div id="output-panel" style="display: none;">
            <div id="output-header">
              <span>Output</span>
              <button id="clear-output">Clear</button>
              <button id="close-output">√ó</button>
            </div>
            <div id="output-content">
              <pre id="output-text"></pre>
            </div>
            <div id="input-section" style="display: none;">
              <label>Input (stdin):</label>
              <textarea id="stdin-input" placeholder="Enter input for your program..."></textarea>
            </div>
          </div>
        </div>
      </div>

      <!-- Bottom Status Bar -->
      <div id="status-bar">
        <span id="cursor-position">Line 1, Column 1</span>
        <span id="connection-status" class="connected">Connected</span>
      </div>
    </div>

    <!-- Custom Alert Modal -->
    <div id="customAlertModal" class="custom-modal" style="display: none;">
      <div class="custom-modal-content">
        <div class="custom-modal-icon"></div>
        <h3 class="custom-modal-title"></h3>
        <p class="custom-modal-message"></p>
        <div class="custom-modal-buttons">
          <button class="custom-modal-btn primary" onclick="closeCustomAlert()">OK</button>
        </div>
      </div>
    </div>
    
    <!-- Custom Confirm Modal -->
    <div id="customConfirmModal" class="custom-modal" style="display: none;">
      <div class="custom-modal-content">
        <div class="custom-modal-icon"></div>
        <h3 class="custom-modal-title"></h3>
        <p class="custom-modal-message"></p>
        <div class="custom-modal-buttons">
          <button class="custom-modal-btn cancel" onclick="handleConfirmResponse(false)">Cancel</button>
          <button class="custom-modal-btn confirm" onclick="handleConfirmResponse(true)">Confirm</button>
        </div>
      </div>
    </div>

    <!-- Simple Templates (must load before firepad.js) -->
    <script src="scripts/simple-templates.js?v=2"></script>
    <script src="scripts/custom-dialogs.js?v=2"></script>
    <script src="scripts/firepad.js?v=3"></script>
    <script src="scripts/interview-notes.js?v=3"></script>
    <script src="scripts/slack-integration.js?v=4"></script>
    <script src="scripts/posthog-tracking.js?v=2"></script>
    <script src="scripts/session-tracking.js?v=1"></script>
    <script src="scripts/activity-monitor.js?v=1"></script>
    <script src="scripts/app.js?v=3"></script>
  </body>
</html>
